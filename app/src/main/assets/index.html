<html>
<head>
    <meta name="viewport" content="user-scalable=0" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://rangy.googlecode.com/svn/trunk/currentrelease/rangy-core.js"></script>
    <script type="text/javascript" src="http://rangy.googlecode.com/svn/trunk/currentrelease/rangy-selectionsaverestore.js"></script>

    <script type="text/javascript">
        $(function(){
            rangy.init();


            window.selection = function(){
                var selectedText = window.getSelection();


                if (selectedText.rangeCount > 0){
                    var range = selectedText.getRangeAt(0),
                        rect = range.getBoundingClientRect();

                    rect.windowWidth = $(window).width();

                    if (selectedText.toString() !== ''){
                        SS.highlightStart(JSON.stringify(rect));
                    }
                }

            };

            window.doneSelection = function(){
                SS.highlightStop();
            };
        });
    </script>
    <style type="text/css">
        body {
            margin: 0;
            padding-left: 0;
            padding-right: 0;
            padding-bottom: 0;
        }
    </style>
</head>
<body>
    <div style="background-color: #fff; padding: 20px 10px;">
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        <textarea></textarea>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>

        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        Hello, world<br/>
        <textarea></textarea>
    </div>
</body>
</html>